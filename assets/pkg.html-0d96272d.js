import{_ as l,M as i,p as d,q as u,R as n,t as s,N as e,V as t,a1 as o}from"./framework-e93b08cb.js";const h={},k=n("h1",{id:"package-json",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#package-json","aria-hidden":"true"},"#"),s(" package.json")],-1),m=n("h2",{id:"basic-info",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#basic-info","aria-hidden":"true"},"#"),s(" Basic info")],-1),v={id:"name-required",tabindex:"-1"},b=n("a",{class:"header-anchor",href:"#name-required","aria-hidden":"true"},"#",-1),g=n("code",null,"string",-1),_={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},f=o(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> pkgNameReg <span class="token operator">=</span> <span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>@<span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token operator">-</span><span class="token operator">*</span><span class="token operator">~</span><span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token operator">-</span><span class="token operator">*</span><span class="token punctuation">.</span>_<span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token operator">/</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token operator">-</span><span class="token operator">~</span><span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token operator">-</span><span class="token punctuation">.</span>_<span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">*</span>$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),q={id:"version-required",tabindex:"-1"},j=n("a",{class:"header-anchor",href:"#version-required","aria-hidden":"true"},"#",-1),y=n("code",null,"string",-1),x={href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"},w={href:"https://docs.npmjs.com/cli/v8/commands/npm-version",target:"_blank",rel:"noopener noreferrer"},I=o('<h3 id="description" tabindex="-1"><a class="header-anchor" href="#description" aria-hidden="true">#</a> description</h3><p><code>string</code> 项目描述</p><h3 id="keywords" tabindex="-1"><a class="header-anchor" href="#keywords" aria-hidden="true">#</a> keywords</h3><p><code>Array&lt;string&gt;</code> 项目关键词, 作用类似于 <a href="#description">description</a></p><h3 id="homepage" tabindex="-1"><a class="header-anchor" href="#homepage" aria-hidden="true">#</a> homepage</h3><p><code>string</code> 项目主页，一般是项目网站或者 GitHub 地址</p><h3 id="repository" tabindex="-1"><a class="header-anchor" href="#repository" aria-hidden="true">#</a> repository</h3><p><code>string | { type: string; url: string }</code> 项目仓库</p><h3 id="bugs" tabindex="-1"><a class="header-anchor" href="#bugs" aria-hidden="true">#</a> bugs</h3><p><code>string | { url: string; email?: string }</code></p>',10),S={href:"https://docs.npmjs.com/cli/v8/commands/npm-bugs",target:"_blank",rel:"noopener noreferrer"},D=o(`<h3 id="author-contributors" tabindex="-1"><a class="header-anchor" href="#author-contributors" aria-hidden="true">#</a> author, contributors</h3><p><code>string</code> 作者或贡献者信息</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;donggua &lt;donggua.nor@gmail.com&gt; (https://github.com/donggua-nor)&quot;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span>
  <span class="token property">&quot;contributors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;donggua&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;donggua.nor@gmail.com&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https://github.com/donggua-nor&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;backup&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;309366517@qq.com&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https://github.com/donggua-nor&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="licenses" tabindex="-1"><a class="header-anchor" href="#licenses" aria-hidden="true">#</a> licenses</h3>`,4),P=n("code",null,"string",-1),T=n("li",null,[n("code",null,"string | { type: string; url: string } | Array<{ type: string; url: string }>")],-1),C={href:"https://spdx.org/licenses/",target:"_blank",rel:"noopener noreferrer"},N=o(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;license&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https://opensource.org/licenses/ISC&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// or</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;licenses&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://www.opensource.org/licenses/mit-license.php&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Apache-2.0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://opensource.org/licenses/apache2.0.php&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// recommend</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;licenses&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="file-configuration" tabindex="-1"><a class="header-anchor" href="#file-configuration" aria-hidden="true">#</a> File configuration</h2><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> type</h3>`,3),E=n("code",null,"'commonjs' | 'module'",-1),R=n("code",null,"Node@14",-1),A={href:"http://localhost:8080/Blog/notes/node/esm.html",target:"_blank",rel:"noopener noreferrer"},B=o('<ul><li><p>默认为 <code>commonjs</code>, 对于 <code>mjs</code> 后缀名文件采用 <code>ESM</code> 语法解析</p></li><li><p>设置为 <code>module</code> 时，对于 <code>cjs</code> 后缀名文件采用 <code>commonjs</code> 语法解析</p></li></ul><h3 id="bin" tabindex="-1"><a class="header-anchor" href="#bin" aria-hidden="true">#</a> bin</h3><p><code>string | { ${binName}: ${binFilePath} }</code> 声明包的脚本文件</p>',3),M={href:"https://en.wikipedia.org/wiki/Shebang_(Unix)",target:"_blank",rel:"noopener noreferrer"},z=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"npm"),s(),n("span",{class:"token function"},"install"),s(" demo "),n("span",{class:"token parameter variable"},"-g"),s(`

d
`),n("span",{class:"token comment"},"# log: Npm is COOL"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),G=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token hashbang comment"},"#!/usr/bin/env node"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Npm is COOL'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),O=n("div",{class:"language-json line-numbers-mode","data-ext":"json"},[n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"name"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"demo"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"bin"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"d"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"./bin/demo.js"'),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),L=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token builtin class-name"},"."),s(`
├── bin
│   └── demo.js
└── package.json
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),V=o('<h3 id="files" tabindex="-1"><a class="header-anchor" href="#files" aria-hidden="true">#</a> files</h3><p><code>Array&lt;string&gt;</code> 指明将此项目作为依赖包安装时包含的文件，默认为排除以下文件的全部内容：</p><ul><li><code>.git</code></li><li><code>CVS</code></li><li><code>.svn</code></li><li><code>.hg</code></li><li><code>.lock-wscript</code></li><li><code>.wafpickle-N</code></li><li><code>.*.swp</code></li><li><code>.DS_Store</code></li><li><code>._*</code></li><li><code>npm-debug.log</code></li><li><code>.npmrc</code></li><li><code>node_modules</code></li><li><code>config.gypi</code></li><li><code>*.orig</code></li><li><code>package.json</code> / <code>npm-shrinkwrap.json</code></li></ul>',3),W={class:"custom-container tip"},F=o('<p class="custom-container-title">TIP</p><p>与 <code>files</code> 字段作用类似的还有 <code>.npmignore</code> 、 <code>.gitignore</code></p><p>但 <code>files</code> 类似于白名单，往往产物内容更少更方便。而 <code>ignore</code> 文件类似于黑名单，需要开发者持续维护</p>',3),H={href:"https://docs.npmjs.com/cli/v9/using-npm/developers#keeping-files-out-of-your-package",target:"_blank",rel:"noopener noreferrer"},$={href:"https://medium.com/@jdxcode/for-the-love-of-god-dont-use-npmignore-f93c08909d8d",target:"_blank",rel:"noopener noreferrer"},J=n("h3",{id:"types",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#types","aria-hidden":"true"},"#"),s(" types")],-1),U=n("p",null,[n("code",null,"string => filePath"),s(" 声明此项目的 "),n("code",null,"TypeScript"),s(" 类型文件")],-1),X={class:"custom-container tip"},K=o('<p class="custom-container-title">TIP</p><ul><li><code>types</code> 与 <code>typings</code> 意义完全相同，可替换使用</li><li>当主声明文件命名为 <code>index.d.ts</code>，并且位于包的根目录与 <code>index.js</code> 同级，则可以省略 <code>types</code> 字段，但建议保持良好的声明式习惯</li></ul>',2),Q={href:"https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html",target:"_blank",rel:"noopener noreferrer"},Y=n("h3",{id:"main",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#main","aria-hidden":"true"},"#"),s(" main")],-1),Z=n("p",null,[n("code",null,"string"),s(" 标准化的工具包主入口")],-1),nn=n("code",null,"index.js",-1),sn=n("code",null,"Node.js",-1),en={href:"/notes/node/cjs.html",target:"_blank",rel:"noopener noreferrer"},an=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" foo "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token comment"},'// => from "main" field'),s(`
`),n("span",{class:"token comment"},"// foo => { value: 1 }"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),on=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// foo.cjs"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),tn=n("div",{class:"language-json line-numbers-mode","data-ext":"json"},[n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token comment"},"// package.json"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"main"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"./foo.cjs"'),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),pn=o(`<h3 id="browser" tabindex="-1"><a class="header-anchor" href="#browser" aria-hidden="true">#</a> browser</h3><p><code>string</code> 工具包主入口</p><p>当项目仅服务于浏览器端，则应采用此字段代替 <a href="#main">main</a> 字段</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foo.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,4),rn={class:"custom-container tip"},cn=n("p",{class:"custom-container-title"},"TIP",-1),ln={href:"https://github.com/defunctzombie/package-browser-field-spec",target:"_blank",rel:"noopener noreferrer"},dn=n("h3",{id:"module",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#module","aria-hidden":"true"},"#"),s(" module")],-1),un=n("p",null,[n("code",null,"string"),s(" 工具包主入口")],-1),hn={href:"https://webpack.js.org/guides/author-libraries/#final-steps",target:"_blank",rel:"noopener noreferrer"},kn={href:"https://github.com/rollup/rollup/wiki/pkg.module",target:"_blank",rel:"noopener noreferrer"},mn={href:"/notes/node/esm.html",target:"_blank",rel:"noopener noreferrer"},vn={class:"custom-container tip"},bn=n("p",{class:"custom-container-title"},"TIP",-1),gn={href:"https://stackoverflow.com/questions/42708484/what-is-the-module-package-json-field-for",target:"_blank",rel:"noopener noreferrer"},_n=n("h3",{id:"exports",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#exports","aria-hidden":"true"},"#"),s(" exports")],-1),fn=n("code",null,"Record<string, string | Exports>",-1),qn=o(`<p>为工具包主入口及其语义版本升级提供了更可靠的保证，支持多模块、多环境、子路径等定义形式。</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;node-addons&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// for C++ plugins</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo-node.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Node.js environment，一般不需要</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.mjs&quot;</span><span class="token punctuation">,</span> <span class="token comment">// for import/import()</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.cjs&quot;</span><span class="token punctuation">,</span> <span class="token comment">// for require()</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token comment">// 兜底</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 子模块路径 foo/bar.js</span>
    <span class="token property">&quot;./bar.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bar.mjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bar.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// for TypeScript</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// for browser</span>
    <span class="token property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// for deno</span>
    <span class="token property">&quot;deno&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// dev environment</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// prod environment</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),jn={class:"custom-container tip"},yn=o(`<p class="custom-container-title">TIP</p><ul><li>优先使用 <code>exports</code> 并配合 <code>main</code> 等字段做兼容配置</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.cjs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.mjs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.umd.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.d.ts&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.mjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.cjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.umd.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo.d.ts&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),xn={href:"http://nodejs.cn/api/packages.html#dual-commonjses-module-packages",target:"_blank",rel:"noopener noreferrer"},wn={href:"https://nodejs.org/api/packages.html?spm=ata.21736010.0.0.3d314bfcjrqivI#packages_package_entry_points",target:"_blank",rel:"noopener noreferrer"},In=n("h3",{id:"workspaces",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#workspaces","aria-hidden":"true"},"#"),s(" workspaces")],-1),Sn=n("code",null,"Array<string>",-1),Dn=n("em",null,"monorepo",-1),Pn={href:"https://docs.npmjs.com/cli/v8/using-npm/workspaces",target:"_blank",rel:"noopener noreferrer"},Tn=n("h2",{id:"dependencies",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#dependencies","aria-hidden":"true"},"#"),s(" Dependencies")],-1),Cn=n("p",null,[n("code",null,"{pkgName<string>: pkgVersion<string>}"),s(" 项目依赖包映射表")],-1),Nn={href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"},En={href:"https://docs.npmjs.com/cli/v8/configuring-npm/package-lock-json",target:"_blank",rel:"noopener noreferrer"},Rn=o("<ul><li><code>^</code>：仅固定 <code>major</code> 大版本，匹配 <code>minor</code>、<code>patch</code> 版本</li><li><code>~</code>：固定 <code>major</code>、<code>minor</code> 版本，仅匹配 <code>patch</code> 补丁版本</li></ul>",1),An={href:"https://docs.npmjs.com/cli/v8/configuring-npm/package-json/#dependencies",target:"_blank",rel:"noopener noreferrer"},Bn={href:"https://docs.npmjs.com/cli/v8/commands/npm-link",target:"_blank",rel:"noopener noreferrer"},Mn={href:"https://docs.npmjs.com/cli/v8/configuring-npm/package-json#local-paths",target:"_blank",rel:"noopener noreferrer"},zn=o('<h3 id="dependencies-1" tabindex="-1"><a class="header-anchor" href="#dependencies-1" aria-hidden="true">#</a> dependencies</h3><p><code>--save, -S</code> 不区分运行环境等，任何情况都需要安装的依赖项</p><h3 id="devdependencies" tabindex="-1"><a class="header-anchor" href="#devdependencies" aria-hidden="true">#</a> devDependencies</h3><p><code>--save-dev, -D</code> 仅在开发环境安装的依赖项</p><h3 id="peerdependencies" tabindex="-1"><a class="header-anchor" href="#peerdependencies" aria-hidden="true">#</a> peerDependencies</h3><p><code>--save-peer</code> 对等依赖项</p>',6),Gn={href:"https://github.com/vuejs/router",target:"_blank",rel:"noopener noreferrer"},On={href:"https://github.com/vuejs/vuex",target:"_blank",rel:"noopener noreferrer"},Ln={href:"https://github.com/vuejs/vue",target:"_blank",rel:"noopener noreferrer"},Vn=n("code",null,"vue-router",-1),Wn=n("code",null,"vuex",-1),Fn=n("code",null,"vue",-1),Hn=n("code",null,"vue",-1),$n=n("code",null,"peerDependencies",-1),Jn=o(`<div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li><code>&gt;=npm@7</code> 默认安装 <code>peerDependencies</code>， <code>3&lt;npm&lt;=6</code> 用户需要自行管理 <code>peerDependencies</code></li></ul></div><h4 id="peerdependenciesmeta" tabindex="-1"><a class="header-anchor" href="#peerdependenciesmeta" aria-hidden="true">#</a> peerDependenciesMeta</h4><p>当用户安装了该项目但未安装 <a href="#peerDependencies">peerDependencies</a> 时，此字段提供对应的处理声明：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// vue-router</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.6.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;peerDependenciesMeta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;optional&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 若使用 \`vue-router\` 时未安装 \`vue\` 依赖，那么将 \`vue\` 视为可选依赖</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optionaldependencies" tabindex="-1"><a class="header-anchor" href="#optionaldependencies" aria-hidden="true">#</a> optionalDependencies</h3><p><code>--save-optional, -O</code> 可选的依赖项，即使安装此类型依赖失败，也不会影响功能使用 <code>一般由开发者提供兼容处理</code></p>`,6),Un={class:"custom-container tip"},Xn=n("p",{class:"custom-container-title"},"TIP",-1),Kn={href:"https://github.com/paulmillr/chokidar",target:"_blank",rel:"noopener noreferrer"},Qn=n("code",null,"OSX",-1),Yn=n("code",null,"fsevents",-1),Zn=n("code",null,"Linux",-1),ns=n("code",null,"fsevents",-1),ss=n("ul",null,[n("li",null,[n("p",null,[n("code",null,"npm/pnpm install --no-optional")])]),n("li",null,[n("p",null,[n("code",null,"yarn install --ignore-optional")])])],-1),es=n("h3",{id:"bundledependencies",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#bundledependencies","aria-hidden":"true"},"#"),s(" bundleDependencies")],-1),as=n("code",null,"Array<string>",-1),os={href:"https://docs.npmjs.com/cli/v8/commands/npm-pack",target:"_blank",rel:"noopener noreferrer"},ts=o(`<h3 id="overrides" tabindex="-1"><a class="header-anchor" href="#overrides" aria-hidden="true">#</a> overrides</h3><p><code>Record&lt;string, string&gt;</code> 针对特定依赖项进行按需重写，支持嵌套、限定范围</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;overrides&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;foo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// or</span>
    <span class="token property">&quot;baz&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;bar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;foo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="tasks" tabindex="-1"><a class="header-anchor" href="#tasks" aria-hidden="true">#</a> Tasks</h2><h3 id="scripts" tabindex="-1"><a class="header-anchor" href="#scripts" aria-hidden="true">#</a> scripts</h3><p><code>Record&lt;string, string&gt;</code> 带有以下默认生命周期的脚本命令： <code>&lt;pre&gt;</code> | <code>&lt;post&gt;</code></p><ul><li><em>install</em></li><li><em>uninstall</em></li><li><em>start</em></li><li><em>restart</em></li><li><em>stop</em></li><li><em>test</em></li><li><em>pack</em></li><li><em>publish</em></li><li><em>自定义脚本命令</em></li></ul>`,7),ps=n("code",null,"prepare",-1),rs=n("code",null,"prepublishOnly",-1),is={href:"https://docs.npmjs.com/cli/v8/using-npm/scripts",target:"_blank",rel:"noopener noreferrer"},cs={class:"custom-container tip"},ls=n("p",{class:"custom-container-title"},"TIP",-1),ds=n("p",null,[s("在 pnpm@6 与 yarn2 中， "),n("code",null,"preinstall"),s(" 将在 "),n("code",null,"install"),s(" 后执行，而不是在 "),n("code",null,"install"),s(" 之前")],-1),us={href:"https://yarnpkg.com/advanced/lifecycle-scripts",target:"_blank",rel:"noopener noreferrer"},hs={href:"https://github.com/pnpm/pnpm/issues/3836",target:"_blank",rel:"noopener noreferrer"},ks={href:"https://github.com/pnpm/pnpm/commit/245920f14ee02eb7d8fa0545902a6288a567a5d2",target:"_blank",rel:"noopener noreferrer"},ms=n("h3",{id:"config",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#config","aria-hidden":"true"},"#"),s(" config")],-1),vs=n("code",null,"Record<string, string>",-1),bs={href:"https://nodejs.org/api/process.html#processenv",target:"_blank",rel:"noopener noreferrer"},gs=n("wbr",null,null,-1),_s=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token hashbang comment"},"#!/usr/bin/env node"),s(`

console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("process"),n("span",{class:"token punctuation"},"."),s("env"),n("span",{class:"token punctuation"},"."),s("npm_package_config_port"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token comment"},"// 8080"),s(`
console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("process"),n("span",{class:"token punctuation"},"."),s("env"),n("span",{class:"token punctuation"},"."),s("npm_package_config_foo"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token comment"},"// bar"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),fs=n("div",{class:"language-json line-numbers-mode","data-ext":"json"},[n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"scripts"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"variable"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"node main.js"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"config"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"port"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"8080"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"foo"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"bar"'),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),qs=o(`<h3 id="packagemanager" tabindex="-1"><a class="header-anchor" href="#packagemanager" aria-hidden="true">#</a> packageManager</h3><p><code>string</code> 指明项目使用的包管理工具</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> pkgManagerReg <span class="token operator">=</span> <span class="token punctuation">(</span>npm<span class="token operator">|</span>pnpm<span class="token operator">|</span>yarn<span class="token punctuation">)</span>@\\d<span class="token operator">+</span>\\<span class="token punctuation">.</span>\\d<span class="token operator">+</span>\\<span class="token punctuation">.</span>\\d<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="publishing" tabindex="-1"><a class="header-anchor" href="#publishing" aria-hidden="true">#</a> Publishing</h2><h3 id="private" tabindex="-1"><a class="header-anchor" href="#private" aria-hidden="true">#</a> private</h3>`,5),js=n("code",null,"boolean",-1),ys={href:"https://docs.npmjs.com/cli/v8/commands/npm-publish",target:"_blank",rel:"noopener noreferrer"},xs=n("h3",{id:"publishconfig",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#publishconfig","aria-hidden":"true"},"#"),s(" publishConfig")],-1),ws=n("code",null,"Record<string, string>",-1),Is={href:"https://docs.npmjs.com/cli/v8/using-npm/config",target:"_blank",rel:"noopener noreferrer"},Ss=o(`<h2 id="system" tabindex="-1"><a class="header-anchor" href="#system" aria-hidden="true">#</a> System</h2><h3 id="engines" tabindex="-1"><a class="header-anchor" href="#engines" aria-hidden="true">#</a> engines</h3><p><code>Record&lt;&#39;node&#39;|&#39;npm&#39;, string&gt;</code> 指明该项目运行的平台</p><ul><li>指明项目所需 <code>node</code> 版本</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=14 &lt;18&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>指明安装包所需 <code>npm</code> 版本</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;npm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~5.2.0&quot;</span> <span class="token comment">// npx version</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="os" tabindex="-1"><a class="header-anchor" href="#os" aria-hidden="true">#</a> os</h3>`,8),Ds=n("code",null,"Array<string>",-1),Ps={href:"https://nodejs.org/api/process.html#processplatform",target:"_blank",rel:"noopener noreferrer"},Ts=o(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// whitelist</span>
  <span class="token property">&quot;os&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;darwin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;linux&quot;</span><span class="token punctuation">]</span>
  <span class="token comment">// blacklist</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;os&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;!win32&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cpu" tabindex="-1"><a class="header-anchor" href="#cpu" aria-hidden="true">#</a> cpu</h3>`,2),Cs=n("code",null,"Array<string>",-1),Ns={href:"https://nodejs.org/api/process.html#processarch",target:"_blank",rel:"noopener noreferrer"},Es=o(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// whitelist</span>
  <span class="token property">&quot;cpu&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;x64&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ia32&quot;</span><span class="token punctuation">]</span>
  <span class="token comment">// blacklist</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;cpu&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;!arm&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="others" tabindex="-1"><a class="header-anchor" href="#others" aria-hidden="true">#</a> Others</h2><h3 id="sideeffects" tabindex="-1"><a class="header-anchor" href="#sideeffects" aria-hidden="true">#</a> sideEffects</h3>`,3),Rs=n("code",null,"boolean | Array<string => filePath>",-1),As={href:"https://webpack.js.org/guides/tree-shaking/",target:"_blank",rel:"noopener noreferrer"},Bs=n("p",null,[n("em",null,"对于模块是否有副作用的定义，基本是指开发者在设计时是否产生了副作用，而不必关心经过打包工具处理后的最终产物。")],-1),Ms={class:"custom-container tip"},zs=n("p",{class:"custom-container-title"},"TIP",-1),Gs={href:"https://github.com/webpack/webpack/tree/main/examples/side-effects",target:"_blank",rel:"noopener noreferrer"},Os={href:"https://github.com/rollup/rollup/issues/1293",target:"_blank",rel:"noopener noreferrer"},Ls={href:"https://github.com/kuitos",target:"_blank",rel:"noopener noreferrer"},Vs={href:"https://github.com/kuitos/kuitos.github.io/issues/41",target:"_blank",rel:"noopener noreferrer"},Ws={href:"https://github.com/wuomzfx",target:"_blank",rel:"noopener noreferrer"},Fs={href:"https://github.com/wuomzfx/tree-shaking-test",target:"_blank",rel:"noopener noreferrer"},Hs=n("h3",{id:"unpkg",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#unpkg","aria-hidden":"true"},"#"),s(" unpkg")],-1),$s=n("code",null,"string => filePath",-1),Js={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},Us=n("a",{href:"#main"},"main",-1),Xs={class:"custom-container tip"},Ks=n("p",{class:"custom-container-title"},"TIP",-1),Qs={href:"https://unpkg.com/",target:"_blank",rel:"noopener noreferrer"},Ys=n("h3",{id:"jsbelir",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#jsbelir","aria-hidden":"true"},"#"),s(" jsbelir")],-1),Zs=n("p",null,[n("code",null,"string => filePath"),s(" 类似于 "),n("a",{href:"#unpkg"},"unpkg")],-1),ne={class:"custom-container tip"},se=n("p",{class:"custom-container-title"},"TIP",-1),ee={href:"https://github.com/jsdelivr",target:"_blank",rel:"noopener noreferrer"},ae=n("h3",{id:"cosmiconfig",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cosmiconfig","aria-hidden":"true"},"#"),s(" cosmiconfig")],-1),oe={href:"https://github.com/davidtheclark/cosmiconfig",target:"_blank",rel:"noopener noreferrer"},te={href:"https://github.com/babel/babel",target:"_blank",rel:"noopener noreferrer"},pe={href:"https://github.com/browserslist/browserslist",target:"_blank",rel:"noopener noreferrer"},re={href:"https://github.com/eslint/eslint",target:"_blank",rel:"noopener noreferrer"},ie={href:"https://github.com/prettier/prettier",target:"_blank",rel:"noopener noreferrer"},ce={href:"https://github.com/okonet/lint-staged",target:"_blank",rel:"noopener noreferrer"};function le(de,ue){const r=i("Badge"),a=i("ExternalLinkIcon"),p=i("CodeGroupItem"),c=i("CodeGroup");return d(),u("div",null,[k,m,n("h3",v,[b,s(" name "),e(r,null,{default:t(()=>[s("required")]),_:1})]),n("p",null,[g,s(" 项目名称，发布到 "),n("a",_,[s("npm"),e(a)]),s(" 中的唯一标识")]),f,n("h3",q,[j,s(" version "),e(r,null,{default:t(()=>[s("required")]),_:1})]),n("p",null,[y,s(" 版本号，遵循 "),n("a",x,[s("语义化版本号"),e(a)]),s("，使用 "),n("a",w,[s("npm version"),e(a)]),s(" 管理")]),I,n("p",null,[s("一般是 issue 地址。存在时可以通过 "),n("a",S,[s("npm bugs"),e(a)]),s(" 打开对应地址")]),D,n("ul",null,[n("li",null,[P,s(),e(r,null,{default:t(()=>[s("recommend")]),_:1})]),T]),n("p",null,[s("详见 "),n("a",C,[s("https://spdx.org/licenses/"),e(a)])]),N,n("p",null,[E,s(" 表明包使用的模块语法（ "),R,s(" 以上版本支持 "),n("a",A,[s("ESM"),e(a)]),s("）")]),B,n("p",null,[s("脚本文件一般在文件头以 "),n("a",M,[s("SheBang"),e(a)]),s(" 声明运行脚本的语言")]),e(c,null,{default:t(()=>[e(p,{title:"bash"},{default:t(()=>[z]),_:1}),e(p,{title:"script"},{default:t(()=>[G]),_:1}),e(p,{title:"package.json"},{default:t(()=>[O]),_:1}),e(p,{title:"directory structure"},{default:t(()=>[L]),_:1})]),_:1}),V,n("div",W,[F,n("ul",null,[n("li",null,[n("a",H,[s("npm | Docs"),e(a)])]),n("li",null,[n("a",$,[s("For the love of god, don’t use .npmignore"),e(a)])])])]),J,U,n("div",X,[K,n("p",null,[s("参阅 "),n("a",Q,[s("TypeScript | Docs"),e(a)])])]),Y,Z,n("p",null,[s("默认为 "),nn,s(" ，主要用于 "),sn,s(" 的 "),n("a",en,[s("cjs"),e(a)]),s(" 模块")]),e(c,null,{default:t(()=>[e(p,{title:"app"},{default:t(()=>[an]),_:1}),e(p,{title:"dep"},{default:t(()=>[on,tn]),_:1})]),_:1}),pn,n("div",rn,[cn,n("p",null,[s("参阅 "),n("a",ln,[s("package-browser-field-spec"),e(a)])])]),dn,un,n("p",null,[s("非官方支持的字段，基本上是 "),n("a",hn,[s("Webpack"),e(a)]),s("、"),n("a",kn,[s("Rollup"),e(a)]),s(" 等打包工具为支持 "),n("a",mn,[s("ES Module"),e(a)]),s(" 而约定的字段")]),n("div",vn,[bn,n("p",null,[s("参阅 "),n("a",gn,[s("what-is-the-module-package-json-field-for | stackoverflow"),e(a)])])]),_n,n("p",null,[fn,s(" 最新标准的导出接口 "),e(r,null,{default:t(()=>[s("recommend")]),_:1})]),qn,n("div",jn,[yn,n("ul",null,[n("li",null,[n("p",null,[s("注意多模块条件导出处理　"),n("a",xn,[s("Dual CommonJS/ES module packages"),e(a)])])]),n("li",null,[n("p",null,[s("参阅　"),n("a",wn,[s("Package entry points"),e(a)])])])])]),In,n("p",null,[Sn,s(" 声明多包项目 "),Dn,s(" 的子包路径 详见 "),n("a",Pn,[s("workspaces | npm Docs"),e(a)])]),Tn,Cn,n("p",null,[s("常见依赖包版本遵循 "),n("a",Nn,[s("语义化版本号"),e(a)]),s("，并根据声明语法供 "),n("a",En,[s("lockfile"),e(a)]),s(" 匹配：")]),Rn,n("p",null,[s("其余版本范围详见文档 "),n("a",An,[s("dependencies"),e(a)])]),n("p",null,[s("通过 "),n("a",Bn,[s("npm link"),e(a)]),s(" 等生成的本地包路径详见 "),n("a",Mn,[s("local-path 文档"),e(a)])]),zn,n("p",null,[s("比如 "),n("a",Gn,[s("vue-router"),e(a)]),s(" 或 "),n("a",On,[s("vuex"),e(a)]),s(" 都是基于 "),n("a",Ln,[s("vue@2.x"),e(a)]),s(" 的响应式 API 构建的依赖库（插件），但在构建 "),Vn,s(" 、 "),Wn,s(" 产物时，作者并不想将 "),Fn,s(" 包含进去，即可将 "),Hn,s(" 声明为 "),$n,s(" .")]),Jn,n("div",Un,[Xn,n("p",null,[s("比如在使用 "),n("a",Kn,[s("chokidar"),e(a)]),s(" 在 "),Qn,s(" 系统使用原生的 "),Yn,s(" 进行文件监听处理，但在 "),Zn,s(" (主要是 mac) 上安装此依赖时经常出现 "),ns,s(" 相关的报错信息。此时可以添加参数忽略此依赖进行安装：")]),ss]),es,n("p",null,[as,s(" 捆绑依赖项，可通过 "),n("a",os,[s("npm pack"),e(a)]),s(" 将声明的捆绑依赖打包进项目压缩包中")]),ts,n("p",null,[s("特殊的 "),ps,s(" 、 "),rs,s(" 见 "),n("a",is,[s("scripts 文档"),e(a)])]),n("div",cs,[ls,ds,n("ul",null,[n("li",null,[n("p",null,[n("a",us,[s("yarn2 Lifecycle Scripts"),e(a)])])]),n("li",null,[n("p",null,[n("a",hs,[s("preinstall phase is executed after install phase "),e(a)])])])]),n("p",null,[s("为此 pnpm 提供了 "),n("a",ks,[s("pnpm:devPreinstall"),e(a)]),s(" 钩子以兼容开发者的使用习惯")])]),ms,n("p",null,[vs,s(),n("a",bs,[s("p"),gs,s("rocess.env"),e(a)]),s(" 配置命令行的环境变量")]),e(c,null,{default:t(()=>[e(p,{title:"main.js"},{default:t(()=>[_s]),_:1}),e(p,{title:"package.json"},{default:t(()=>[fs]),_:1})]),_:1}),qs,n("p",null,[js,s(" 指明包私有，避免被 "),n("a",ys,[s("npm publish"),e(a)]),s(" 发布")]),xs,n("p",null,[ws,s(" 发布配置，详见"),n("a",Is,[s("config | npm Docs"),e(a)])]),Ss,n("p",null,[Ds,s(" 基于 "),n("a",Ps,[s("process.platform"),e(a)]),s(" 运行项目的操作系统黑白名单：")]),Ts,n("p",null,[Cs,s(" 基于 "),n("a",Ns,[s("process.arch"),e(a)]),s(" 运行项目的操作系统黑白名单：")]),Es,n("p",null,[Rs,s(" 声明存在副作用的模块，用于 "),n("a",As,[s("Webpack"),e(a)]),s(" 等打包工具的导出优化")]),Bs,n("div",Ms,[zs,n("ul",null,[n("li",null,[n("a",Gs,[s("Webpack-example"),e(a)])]),n("li",null,[n("a",Os,[s("Rollup issue"),e(a)])]),n("li",null,[n("a",Ls,[s("@kuitos"),e(a)]),s(" - "),n("a",Vs,[s("Webpack 中的 sideEffects 到底该怎么用？ | GitHub"),e(a)])]),n("li",null,[n("a",Ws,[s("@wuomzfx"),e(a)]),s(" - "),n("a",Fs,[s("你的 Tree-Shaking 并没什么卵用 | GitHub"),e(a)])])])]),Hs,n("p",null,[$s,s(" 在发布到 "),n("a",Js,[s("npm"),e(a)]),s(" 后，可以使用此字段为项目对应的文件开启 CDN 服务，默认为 "),Us]),n("div",Xs,[Ks,n("p",null,[s("参阅 "),n("a",Qs,[s("unpkg | docs"),e(a)])])]),Ys,Zs,n("div",ne,[se,n("p",null,[s("参阅 "),n("a",ee,[s("jsdelivr | GIthub"),e(a)])])]),ae,n("p",null,[s("基于 "),n("a",oe,[s("cosmiconfig"),e(a)]),s(" 实现的相关配置仅在此简单罗列常用工具")]),n("ul",null,[n("li",null,[n("a",te,[s("Babel"),e(a)])]),n("li",null,[n("a",pe,[s("Browserslist"),e(a)])]),n("li",null,[n("a",re,[s("ESLint"),e(a)])]),n("li",null,[n("a",ie,[s("Prettier"),e(a)])]),n("li",null,[n("a",ce,[s("lint-staged"),e(a)])])])])}const ke=l(h,[["render",le],["__file","pkg.html.vue"]]);export{ke as default};
